<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>SneakerZone</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    html { scroll-behavior: smooth; }
    body { font-family: 'Tajawal', sans-serif; }
    .modal { display: none; position: fixed; z-index: 50; inset: 0; background: rgba(0,0,0,0.7); }
    .modal.active { display: flex; align-items: center; justify-content: center; }
    .modal-content { background: #fff; border-radius: 1rem; max-width: 500px; width: 90%; padding: 20px; }
    .close { cursor: pointer; float: left; font-size: 20px; }
  </style>
</head>
<body class="bg-white text-slate-800">

  <!-- Header -->
  <header class="bg-pink-600 text-white py-4 shadow">
    <div class="container mx-auto flex justify-between items-center px-4">
      <h1 class="text-2xl font-bold">SneakerZone</h1>
      <nav class="space-x-4 space-x-reverse">
        <a href="#products" class="hover:underline">منتجاتنا</a>
        <a href="#about" class="hover:underline">من نحن</a>
      </nav>
    </div>
  </header>

  <!-- Hero -->
  <section class="bg-pink-100 py-16 text-center">
    <h2 class="text-4xl font-bold mb-4">كولكشن كوتشيات 2025</h2>
    <p class="text-lg text-slate-700 mb-6">أحدث صيحات الموضة بأجود الخامات وأفضل الأسعار</p>
    <a href="#products" class="bg-pink-600 text-white px-6 py-3 rounded-lg text-lg shadow hover:bg-pink-700">تسوق الآن</a>
  </section>

  <!-- Products -->
  <section id="products" class="container mx-auto py-16 px-4">
    <h3 class="text-3xl font-bold text-center mb-10">منتجاتنا</h3>
    <div id="productsGrid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
      <!-- المنتجات بتيجي هنا من السكريبت -->
    </div>
  </section>

  <!-- About -->
  <section id="about" class="bg-slate-100 py-16 px-4">
    <div class="container mx-auto text-center max-w-2xl">
      <h3 class="text-3xl font-bold mb-6">من نحن</h3>
      <p class="text-lg text-slate-700">
        SneakerZone مكانك الأول للكوتشيات الأصلية والموديلات الجديدة. هدفنا إنك تلاقي الشوز اللي يليق على ستايلك بجودة عالية وسعر مناسب.
      </p>
    </div>
  </section>

  <!-- Footer -->
  <footer class="bg-pink-600 text-white py-6 mt-10">
    <div class="container mx-auto text-center">
      <p>&copy; 2025 SneakerZone. جميع الحقوق محفوظة.</p>
    </div>
  </footer>

  <!-- Modal للطلب -->
  <div id="orderModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal()">&times;</span>
      <h3 class="text-xl font-bold mb-4">اطلب الآن</h3>
      <form id="orderForm" class="space-y-4">
        <input type="hidden" id="productName" name="product">
        <div>
          <label class="block text-sm">الاسم</label>
          <input type="text" id="customerName" required class="w-full border rounded px-3 py-2">
        </div>
        <div>
          <label class="block text-sm">رقم التليفون</label>
          <input type="tel" id="customerPhone" required class="w-full border rounded px-3 py-2">
        </div>
        <div>
          <label class="block text-sm">العنوان</label>
          <textarea id="customerAddress" required class="w-full border rounded px-3 py-2"></textarea>
        </div>
        <button type="submit" class="bg-pink-600 text-white px-4 py-2 rounded">إرسال الطلب</button>
      </form>
    </div>
  </div>

  <!-- Modal للصور -->
  <div id="imageModal" class="modal">
    <div class="modal-content relative max-w-2xl">
      <span class="close absolute top-2 left-4 text-black text-2xl cursor-pointer" onclick="closeImageModal()">&times;</span>
      <img id="modalImage" src="" class="w-full rounded-lg">
      <div class="flex justify-between mt-2">
        <button onclick="prevImage()" class="bg-pink-600 text-white px-4 py-2 rounded">◀</button>
        <button onclick="nextImage()" class="bg-pink-600 text-white px-4 py-2 rounded">▶</button>
      </div>
    </div>
  </div>

  <script>
    const SHEET_URL = "https://script.google.com/macros/s/AKfycbzNQEe8bN3p8h6bUoSPIPxWtFRzKOGKX95bzAwlKdwFhFNYGdPcDQZc37C5-47cSzv2Zg/exec";

    // تحميل المنتجات
    async function loadProducts(){
      try {
        const res = await fetch(SHEET_URL);
        const data = await res.json();
        renderProducts(data);
      } catch (err) {
        console.error("خطأ في تحميل المنتجات:", err);
      }
    }

    // عرض المنتجات
    function renderProducts(products){
      const grid = document.getElementById("productsGrid");
      grid.innerHTML = "";
      products.forEach((p) => {
        const displayPrice = (!p.price || p.price==="") ? "" : 
          (String(p.price).includes("EGP") || String(p.price).includes("JOD")) ? p.price : `${p.price} EGP`;

        const card = document.createElement("div");
        card.className = "bg-pink-50 rounded-xl shadow overflow-hidden";

        const firstImage = p.images && p.images.length > 0 ? p.images[0] : "";
        const imagesAttr = p.images ? p.images.join("|") : "";

        card.innerHTML = `
          <img src="${firstImage}" alt="${p.name}" 
               data-images="${imagesAttr}" 
               class="w-full h-60 object-cover cursor-pointer product-img">
          <div class="p-4">
            <h4 class="font-semibold text-lg">${p.name}</h4>
            <p class="text-sm text-slate-600 mt-1">${p.description || ""}</p>
            <div class="flex items-center justify-between mt-3">
              <span class="font-bold text-pink-600">${displayPrice}</span>
              <button class="order-now-btn bg-pink-600 text-white px-3 py-1 rounded-lg text-sm" 
                      data-name="${p.name}" data-price="${p.price}">اطلب الآن</button>
            </div>
          </div>
        `;
        grid.appendChild(card);
      });

      // تفعيل الصور
      document.querySelectorAll(".product-img").forEach(img => {
        img.addEventListener("click", () => {
          const images = img.dataset.images.split("|");
          openImageModal(images);
        });
      });

      // تفعيل زر اطلب الآن
      document.querySelectorAll(".order-now-btn").forEach(btn => {
        btn.addEventListener("click", () => {
          document.getElementById("productName").value = btn.dataset.name;
          openModal();
        });
      });
    }

    // مودال الطلب
    const modal = document.getElementById("orderModal");
    function openModal(){ modal.classList.add("active"); }
    function closeModal(){ modal.classList.remove("active"); }

    document.getElementById("orderForm").addEventListener("submit", async (e)=>{
      e.preventDefault();
      alert("تم إرسال طلبك بنجاح ✅");
      closeModal();
    });

    // مودال الصور
    let currentImages = [];
    let currentIndex = 0;
    function openImageModal(images){
      currentImages = images;
      currentIndex = 0;
      document.getElementById("modalImage").src = images[0];
      document.getElementById("imageModal").classList.add("active");
    }
    function closeImageModal(){
      document.getElementById("imageModal").classList.remove("active");
    }
    function prevImage(){
      if(currentImages.length>0){
        currentIndex = (currentIndex - 1 + currentImages.length) % currentImages.length;
        document.getElementById("modalImage").src = currentImages[currentIndex];
      }
    }
    function nextImage(){
      if(currentImages.length>0){
        currentIndex = (currentIndex + 1) % currentImages.length;
        document.getElementById("modalImage").src = currentImages[currentIndex];
      }
    }

    loadProducts();
  </script>

</body>
</html>
